### 연관관계 매핑시 고려사항 3가지

<br/>

엔티티의 연관관계를 매핑할 때는 다음 3가지를 고려해야 한다.

1. 다중성
2. 단방향, 양방향
3. 연관관계의 주인

<br/>

#### 다중성

다대일: @ManyToOne <br/>
일대다: @OneToMany <br/>
일대일: @OneToOne <br/>
다대다: @ManyToMany <br/>

보통 다대일 관계를 가장 많이 사용한다.

<br/>

#### 단방향, 양방향

테이블은 외래 키 하나로 조인을 사용해서 양방향으로 쿼리가 가능하다.

객체는 참조용 필드가 있는 쪽으로만 참조가 가능하다. 한쪽만 참조하면 단방향, 양쪽이 서로 참조하면 양방향이다.

<br/>

#### 연관관계의 주인

테이블의 연관관계를 관리하는 포인트는 외래 키 하나다.

양방향인 경우, 객체의 연관관계를 관리하는 포인트는 2곳이다.


따라서 두 객체 연관관계중 하나를 정해 데이터베이스 외래 키를 관리하는데 이것을 연관관계의 주인이라 한다. <br/>
일반적으로 외래 키를 가진 테이블과 매핑한 엔티티를 연관관계의 주인으로 선택한다. <br/>
주인이 아닌 방향은 외래 키를 변ㄴ경할 수 없고 읽기만 가능하다.

지금부터 다중성, 단방향, 양방향을 고려한 가능한 모든 연관관계를 하나씩 알아보자.

<br/>

### 다대일 [N:1]


<br/>

#### 다대일 단방향

![image](https://user-images.githubusercontent.com/78454649/193237987-1a829ddd-3e66-48cc-912a-450e75306b7d.png)

JPA에서 가장 많이 사용하는 연관관계이다. 이전 연관관계 매핑 기초에서 자세히 공부했기 때문에 간단히 넘어간다.

<br/>

#### 다대일 방향

![image](https://user-images.githubusercontent.com/78454649/193238083-ce9bad61-9858-4644-b1d0-0e14d3c55eb3.png)

양방향은 외래 키가 있는 쪽이 연관관계의 주인이다. <br/>
양방향 연관관계는 항상 서로를 참조해야 한다. -> 연관관계 편의 메소드를 사용하면 편리하다. <br/>
단방향만 매핑해도 연관관계는 완성된다. 양방향은 상대 객체의 조회 기능을 추가하는 것이다. 









